<!DOCTYPE html>
<html lang="en">
<link rel="stylesheet" type="text/css" href="\src\main\resources\public\stylesheets\Payment.css" />

<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Payment Page</title>

</head>
<body>
<div id = "container">
    <div id = "heading">
        <p>Add Payment Method</p>
    </div>
    <div id = "box">
        <div id = "sub">
            <label>CASH</label> <input type="radio" id="cash" name="payment"/>
        </div>
        <div id = "su![](../../public/lang-logo.png)bs">
            <label>CREDIT/DEBIT</label>
            <input type="radio" id="card" name = "payment"/>
            <div id = "info">
                <label>Card Number:  </label><input type="text" id="cardnumber"/>
                <label>Expiry date:  </label><input type="text" placeholder="MM/YYYYY" id = "expirydate"/>
                <label>CVV:   </label><input type="text" id="cvv" size="20" placeholder="XXX"/>
            </div>
        </div>
    </div>

    <div id = "buttonbox">
        <input type="button" value = "BACK TO HOME PAGE" />
        <input type="button" value = "PLACE ORDER" onclick="validate()"/>
    </div>
</div>

<script>
    function validate()
    {
        var cardNumber = document.getElementById("cardnumber").value ;
        var expiryDate = document.getElementById("expirydate").value;
        var cvv = document.getElementById("cvv").value;
        var month;
        var year;
        var regexpCard = 1233-3565-7677-8989;
        // var regexpCard = /^(?:(4[0-9]{12}(?:[0-9]{3})?)|(5[1-5][0-9]{14})|(6(?:011|5[0-9]{2})[0-9]{12})|(3[47][0-9]{13})|(3(?:0[0-5]|[68][0-9])[0-9]{11})|((?:2131|1800|35[0-9]{3})[0-9]{11}))$/;
        var regexNumber = /^-?\d+$/;

        if(document.getElementById("cash").checked == false && document.getElementById("card").checked == false)
        {
            alert("Select a payment type");
            return false;
        }

        if(document.getElementById("cash").checked == true)
        {
            alert("Payment is done");
            return true;
        }


        if (regexpCard.test(cardNumber))
        {
            if(expiryDate.length == 7 && expiryDate[2] == '/')
            {
                month = expiryDate[0] + expiryDate[1];
                year = expiryDate[3] + expiryDate[4] + expiryDate[5] + expiryDate[6];
                if (regexNumber.test(month) && regexNumber.test(year))
                {
                    if(parseInt(month)>0 && parseInt(month) < 13 && parseInt(year) >= 2022)
                    {
                        if(cvv.length == 3 && regexNumber.test(cvv))
                        {
                            alert("Payment is done");
                            return true;
                        }
                        else
                        {
                            alert("Enter valid cvv");
                            return false;
                        }
                    }
                    else
                    {
                        alert("Enter valid expiry date");
                        return false;
                    }
                }
                else
                {
                    alert("Enter valid expiry date");
                    return false;
                }
            }
            else
            {
                alert("Enter valid expiry date");
                return false;
            }

        }
        else
        {
            alert("Enter valid card number");
            return false;
        }
    }
</script>
</body>
</html>